(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{242:function(e,t){},247:function(e,t,n){e.exports=n(602)},252:function(e,t,n){},253:function(e,t,n){},287:function(e,t){},289:function(e,t){},323:function(e,t){},324:function(e,t){},509:function(e,t,n){var a={"./geojson.json":221,"./table-schema.json":510,"./topojson.json":222};function o(e){var t=r(e);return n(t)}function r(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}o.keys=function(){return Object.keys(a)},o.resolve=r,e.exports=o,o.id=509},595:function(e,t){},596:function(e,t){},600:function(e,t){},601:function(e,t){},602:function(e,t,n){"use strict";n.r(t);var a=n(8),o=n.n(a),r=n(243),c=n.n(r),i=(n(252),n(253),n(246)),l=n(244),s=n.n(l);var u=function(e){var t=Object(a.useState)({}),n=Object(i.a)(t,2),r=n[0],c=n[1],l=e.fields.map(function(e){return{name:e.name,label:e.title||e.name}});return o.a.createElement("form",{onSubmit:function(t){t.preventDefault();var n='SELECT COUNT(*) OVER (), * FROM "'.concat(e.resourceId,'" WHERE ');if(0===r.rules.length)alert("Please, provide at least one rule.");else{var a=r.combinator;r.rules.forEach(function(e,t){n+=0===t?'"'.concat(e.field,'" ').concat(e.operator," '").concat(e.value,"'"):" ".concat(a.toUpperCase(),' "').concat(e.field,'" ').concat(e.operator," '").concat(e.value,"'")}),n+=" LIMIT 100"}var o=e.apiUrl+"datastore_search_sql?sql=".concat(n);fetch(encodeURI(o)).then(function(e){return e.json()}).then(function(t){var n=t.result.records[0].count;document.getElementById("numberOfRows").innerText=n;var a=t.result.records.map(function(e){return delete e.count,delete e._id,delete e._full_text,e});window["table".concat(e.viewId)].updateData(a);var o=Object.keys(a[0]);window["table".concat(e.viewId)].addSettings({colHeaders:o,columns:void 0})}).catch(function(e){return console.error(e)})}},o.a.createElement(s.a,{fields:l,onQueryChange:c,combinators:[{name:"and",label:"AND"}],operators:[{name:"=",label:"="},{name:"!=",label:"!="},{name:"<",label:"<"},{name:">",label:">"},{name:"<=",label:"<="},{name:">=",label:">="}],controlElements:{addGroupAction:function(){return o.a.createElement("div",{style:{display:"none"}})},combinatorSelector:function(){return o.a.createElement("div",{style:{display:"none"}})}},translations:{fields:{title:"Fields"},operators:{title:"Operators"},value:{title:"Value"},removeRule:{label:"x",title:"Remove rule"},removeGroup:{label:"x",title:"Remove group"},addRule:{label:"Add filter",title:"Add rule"},addGroup:{label:"Add group",title:"Add group"},combinators:{title:"Combinators"}}}),o.a.createElement("div",{className:"applyButton"},o.a.createElement("input",{type:"submit",value:"Submit"})))};var d=function(e){var t=e.view;return t.resources[0].schema?o.a.createElement("div",{className:"App"},o.a.createElement(u,{resourceId:t.resources[0].id,viewId:t.id,fields:t.resources[0].schema.fields,apiUrl:"https://www.energidataservice.dk/api/3/action/"})):o.a.createElement("div",{className:"no-filters"})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var m=n(245),f=n(258).Dataset,v=document.getElementsByClassName("react-me-datapackage-views");function p(e){try{return JSON.parse(e)}catch(t){return e}}var b=!0,w=!1,h=void 0;try{for(var E,y=v[Symbol.iterator]();!(b=(E=y.next()).done);b=!0){var g=p(E.value.getAttribute("data-datapackage-json"));f.load(g).then(function(e){(e.descriptor.views||[]).forEach(function(t){var n=Object(m.compileView)(t,e.descriptor);n.resources[0].datastore_active&&O(n)})}).catch(function(e){console.warn("Failed to load a Dataset from provided datapackage id\n"+e)})}}catch(j){w=!0,h=j}finally{try{b||null==y.return||y.return()}finally{if(w)throw h}}function O(e){c.a.render(o.a.createElement(d,{view:e}),document.getElementById("datapackage-filter-".concat(e.id)))}"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[247,1,2]]]);
//# sourceMappingURL=main.e2c5df00.chunk.js.map